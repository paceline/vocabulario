<% content_for :sidebar do %>
  <div id="test_score" class="content">
    <%= render @score %>
  </div>
<% end %>

<div id="intro_pane" class="content">
  <h1>Welcome!</h1>
  <p>Fill out the form below to get started and test your foreign language skills:</p>
</div>

<div id="test_pane" class="content">
  <% form_remote_for @score do %>
    <div class="fields">
      <h2>1. Languages</h2>
      Show me vocabularies in <%= select :test, :from, @languages.collect {|p| [ p.word, p.id ] } %> and I'll translate them into <%= select :test, :to, Language.list.collect {|p| [ p.word, p.id ] }, { :selected => Language.list[1].id } %>
      <%= observe_field :test_from, :url => select_vocabularies_path, :update => "test_to", :with => "'language_id=' + value + '&selected=' + $A($('test_to').options).find(function(option) { return option.selected; } ).value" %>
    </div>
    <div class="fields">
      <h2>2. Number of questions</h2>
      I'm up for <%= select :test, :limit, VocabularyTest.limits %> questions.
    </div>
    <div class="fields">
      <h2>3. Topic</h2>
      I only want to be tested on vocabularies tagged with:<br />
      <p><%= select :test, :tags, @tags.collect {|t| [ t.name, t.id ] }, { }, { :multiple => true, :size => 5 } %>
      <%= observe_field :test_from, :url => tags_for_language_vocabularies_path, :update => "test_tags", :complete => visual_effect(:highlight, "test_tags"), :with => "language_id" %>
    </div>
    <div class="fields">
      <%= submit_tag "Ready? Let's go!" %>
    </div>
  <% end %>
</div>